(function(e,d){function f(b,d){for(var a=decodeURI(b),a=g[d?"strict":"loose"].exec(a),c={attr:{},param:{},seg:{}},e=14;e--;)c.attr[h[e]]=a[e]||"";c.param.query={};c.param.fragment={};c.attr.query.replace(i,function(a,b,d){b&&(c.param.query[b]=d)});c.attr.fragment.replace(j,function(a,b,d){b&&(c.param.fragment[b]=d)});c.seg.path=c.attr.path.replace(/^\/+|\/+$/g,"").split("/");c.seg.fragment=c.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");c.attr.base=c.attr.host?c.attr.protocol+"://"+c.attr.host+
(c.attr.port?":"+c.attr.port:""):"";return c}function k(b){b=b.tagName;return b!==d?l[b.toLowerCase()]:b}var l={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},h="source protocol authority userInfo user password host port relative path directory file query fragment".split(" "),m={anchor:"fragment"},g={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},
i=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,j=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g;e.fn.url=function(b){var d="";this.length&&(d=e(this).attr(k(this[0]))||"");return e.url(d,b)};e.url=function(b,e){1===arguments.length&&!0===b&&(e=!0,b=d);b=b||window.location.toString();return{data:f(b,e||!1),attr:function(a){a=m[a]||a;return a!==d?this.data.attr[a]:this.data.attr},param:function(a){return a!==d?this.data.param.query[a]:this.data.param.query},fparam:function(a){return a!==d?this.data.param.fragment[a]:this.data.param.fragment},
segment:function(a){if(a===d)return this.data.seg.path;a=a<0?this.data.seg.path.length+a:a-1;return this.data.seg.path[a]},fsegment:function(a){if(a===d)return this.data.seg.fragment;a=a<0?this.data.seg.fragment.length+a:a-1;return this.data.seg.fragment[a]}}}})(jQuery);